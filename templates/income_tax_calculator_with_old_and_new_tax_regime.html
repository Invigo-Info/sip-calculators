<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Income Tax Calculator | Old vs New Tax Regime Comparison</title>
    <meta name="description" content="Compare income tax calculations between old and new tax regimes. Calculate your tax liability and find the best option for FY 2024-25 and FY 2025-26.">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nav-component.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/income_tax_calculator_with_old_and_new_tax_regime_style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Income Tax Calculator</h1>
            <p class="subtitle">Compare Old vs New Tax Regime for FY 2024-25 & FY 2025-26</p>
            {% include 'navigation.html' %}
        </header>

        <div class="calculator-container">
            <!-- Left Side - Input Tabs -->
            <div class="input-sections">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="basic-details">Basic Details</button>
                    <button class="tab-btn" data-tab="income-details">Income Details</button>
                    <button class="tab-btn" data-tab="deductions">Deductions</button>
                </div>

                <!-- Basic Details Tab -->
                <div class="tab-content active" id="basic-details">
                    <h2>Basic Details</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label class="input-label">Financial Year</label>
                            <div class="select-container">
                                <select id="financialYear" class="custom-select">
                                    <option value="FY 2025-2026">FY 2025-2026 (Return to be filed between 1st April 2026 - 31st December 2026) - Latest</option>
                                    <option value="FY 2024-2025" selected>FY 2024-2025 (Return to be filed between 1st April 2025 - 31st December 2025)</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Age Group</label>
                            <div class="select-container">
                                <select id="ageGroup" class="custom-select">
                                    <option value="0-60" selected>0-60</option>
                                    <option value="60-80">60-80</option>
                                    <option value="80+">80 & above</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="tab-actions">
                        <button class="continue-btn" onclick="switchToTab('income-details')">Continue</button>
                    </div>
                </div>

                <!-- Income Details Tab -->
                <div class="tab-content" id="income-details">
                    <h2>Income Details</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label class="input-label">Income from Salary</label>
                            <div class="input-field-container">
                                <input type="number" id="salary" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Exempt Allowances</label>
                            <div class="input-field-container">
                                <input type="number" id="exemptAllowances" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Self-occupied Property Loss</label>
                            <div class="input-field-container">
                                <input type="number" id="selfOccupiedPropertyLoss" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Rental Income</label>
                            <div class="input-field-container">
                                <input type="number" id="rentalIncome" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Digital Asset Income</label>
                            <div class="input-field-container">
                                <input type="number" id="digitalAssetIncome" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Interest on Home Loan (Let-out)</label>
                            <div class="input-field-container">
                                <input type="number" id="interestHomeLoanLetout" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Other Income</label>
                            <div class="input-field-container">
                                <input type="number" id="otherIncome" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>
                    </div>
                    <div class="tab-actions">
                        <button class="back-btn" onclick="switchToTab('basic-details')">Back</button>
                        <button class="continue-btn" onclick="switchToTab('deductions')">Continue</button>
                    </div>
                </div>

                <!-- Deductions Tab -->
                <div class="tab-content" id="deductions">
                    <h2>Deductions</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label class="input-label">Section 80C (Max ₹1.5L)</label>
                            <div class="input-field-container">
                                <input type="number" id="section80C" value="0" min="0" max="150000" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80D: Medical Insurance</label>
                            <div class="input-field-container">
                                <input type="number" id="section80D" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80G: Donations</label>
                            <div class="input-field-container">
                                <input type="number" id="section80G" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80TTA: Interest from Savings</label>
                            <div class="input-field-container">
                                <input type="number" id="section80TTA" value="0" min="0" max="10000" step="100">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80CCD (1): Employee NPS</label>
                            <div class="input-field-container">
                                <input type="number" id="section80CCD1" value="0" min="0" max="50000" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80CCD (2): Employer NPS</label>
                            <div class="input-field-container">
                                <input type="number" id="section80CCD2" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Section 80EEA: Housing Loan</label>
                            <div class="input-field-container">
                                <input type="number" id="section80EEA" value="0" min="0" max="150000" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Other Deductions</label>
                            <div class="input-field-container">
                                <input type="number" id="otherDeductions" value="0" min="0" step="1000">
                                <span class="input-suffix">₹</span>
                            </div>
                        </div>
                    </div>
                    <div class="tab-actions">
                        <button class="back-btn" onclick="switchToTab('income-details')">Back</button>
                        <button class="calculate-btn" onclick="calculateIncomeTax()">View Calculation</button>
                    </div>
                </div>
            </div>

            <!-- Right Side - Output Panel (Fixed) -->
            <div class="results-section">
                <div class="results-header">
                    <h2>Tax Liability Summary</h2>
                </div>

                <!-- Tax Comparison Cards -->
                <div class="tax-comparison-grid">
                    <div class="tax-card old-regime-card">
                        <div class="card-header">
                            <h3>Old Regime Tax</h3>
                            <div class="regime-badge old">Old</div>
                        </div>
                        <div class="card-content">
                            <div class="tax-amount" id="oldRegimeTax">₹0</div>
                            <div class="tax-details">
                                <div class="detail-item">
                                    <span>Taxable Income:</span>
                                    <span id="oldRegimeTaxableIncome">₹0</span>
                                </div>
                                <div class="detail-item">
                                    <span>Deductions:</span>
                                    <span id="oldRegimeDeductions">₹0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tax-card new-regime-card">
                        <div class="card-header">
                            <h3>New Regime Tax</h3>
                            <div class="regime-badge new">New</div>
                        </div>
                        <div class="card-content">
                            <div class="tax-amount" id="newRegimeTax">₹0</div>
                            <div class="tax-details">
                                <div class="detail-item">
                                    <span>Taxable Income:</span>
                                    <span id="newRegimeTaxableIncome">₹0</span>
                                </div>
                                <div class="detail-item">
                                    <span>Standard Deduction:</span>
                                    <span id="newRegimeStandardDeduction">₹0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Savings Section -->
                <div class="savings-section">
                    <div class="savings-card">
                        <div class="savings-header">
                            <h3>Recommended Option</h3>
                        </div>
                        <div class="savings-content">
                            <div class="better-regime" id="betterRegime">Calculate to Compare</div>
                            <div class="savings-amount">
                                <span class="savings-label">You Save:</span>
                                <span class="amount" id="savingsAmount">₹0</span>
                            </div>
                            <div class="savings-message" id="savingsMessage">
                                Enter your details and click "View Calculation" to compare tax regimes
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-btn download-btn" onclick="downloadIncomeTaxPDF()">
                        <span class="btn-icon">📄</span>
                        Download Report
                    </button>
                    <button class="action-btn reset-btn" onclick="resetIncomeTaxCalculator()">
                        <span class="btn-icon">🔄</span>
                        Reset Values
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Collapsible Results -->
        <div class="mobile-results-toggle">
            <button class="mobile-toggle-btn" onclick="toggleMobileResults()">
                <span class="btn-text">View Tax Summary</span>
                <span class="toggle-arrow">▼</span>
            </button>
        </div>

        <div class="mobile-results-section hidden" id="mobileResultsSection">
            <div class="mobile-results-content">
                <!-- Same content as desktop results but optimized for mobile -->
                <div class="results-header">
                    <h2>Tax Liability Summary</h2>
                </div>

                <div class="tax-comparison-grid mobile">
                    <div class="tax-card old-regime-card mobile">
                        <div class="card-header">
                            <h3>Old Regime</h3>
                            <div class="regime-badge old">Old</div>
                        </div>
                        <div class="card-content">
                            <div class="tax-amount" id="mobileOldRegimeTax">₹0</div>
                        </div>
                    </div>

                    <div class="tax-card new-regime-card mobile">
                        <div class="card-header">
                            <h3>New Regime</h3>
                            <div class="regime-badge new">New</div>
                        </div>
                        <div class="card-content">
                            <div class="tax-amount" id="mobileNewRegimeTax">₹0</div>
                        </div>
                    </div>
                </div>

                <div class="savings-section mobile">
                    <div class="mobile-savings-summary">
                        <div class="better-regime-mobile" id="mobileBetterRegime">Calculate to Compare</div>
                        <div class="savings-amount-mobile">
                            <span>Save: </span>
                            <span class="amount" id="mobileSavingsAmount">₹0</span>
                        </div>
                    </div>
                </div>

                <!-- Mobile Action Buttons -->
                <div class="action-buttons mobile">
                    <button class="action-btn download-btn" onclick="downloadIncomeTaxPDF()">
                        <span class="btn-icon">📄</span>
                        Download Report
                    </button>
                    <button class="action-btn reset-btn" onclick="resetIncomeTaxCalculator()">
                        <span class="btn-icon">🔄</span>
                        Reset Values
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Detailed Results Page (Initially Hidden) -->
    <div class="detailed-results-page hidden" id="detailedResultsPage">
        <div class="container">
            <div class="detailed-results-header">
                <button class="back-to-calculator-btn" onclick="hideDetailedResults()">
                    <span class="back-icon">←</span>
                    Back to Calculator
                </button>
                <div class="results-title">
                    <h1>Summary - <span id="detailedFY">FY 2024-2025</span> <span id="detailedAY">(AY 2025-2026)</span></h1>
                    <div class="results-actions">
                        <button class="recalculate-btn" onclick="hideDetailedResults()">
                            <span class="recalc-icon">🔄</span>
                            Recalculate
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recommendation Banner -->
            <div class="recommendation-banner" id="recommendationBanner">
                <div class="recommendation-content">
                    <span class="recommendation-icon">🎯</span>
                    <span class="recommendation-text" id="recommendationText">
                        New Tax Regime is recommended for you. It would save you ₹29,640 in taxes.
                    </span>
                </div>
                <button class="file-now-btn">File Now</button>
            </div>

            <!-- Regime Comparison Tabs -->
            <div class="regime-tabs">
                <button class="regime-tab active" data-regime="new" onclick="switchRegimeTab('new')">
                    New regime
                    <span class="recommended-badge" id="newRegimeBadge">Recommended</span>
                </button>
                <button class="regime-tab" data-regime="old" onclick="switchRegimeTab('old')">
                    Old regime
                </button>
            </div>

            <!-- Detailed Results Content -->
            <div class="detailed-results-content">
                <div class="results-layout">
                    <!-- Left Side - Charts and Summary -->
                    <div class="charts-section">
                        <div class="tax-comparison-chart">
                            <canvas id="detailedTaxChart"></canvas>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color total-income"></span>
                                <span class="legend-label">Total income</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color taxable-income"></span>
                                <span class="legend-label">Taxable income</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color deduction"></span>
                                <span class="legend-label">Deduction</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color tax-payable"></span>
                                <span class="legend-label">Tax payable</span>
                            </div>
                        </div>
                    </div>

                    <!-- Right Side - Detailed Breakdown -->
                    <div class="breakdown-section">
                        <div class="breakdown-item">
                            <div class="breakdown-label">Total income</div>
                            <div class="breakdown-value" id="detailedTotalIncome">₹9,00,000</div>
                        </div>

                        <div class="breakdown-item">
                            <div class="breakdown-label">Taxable income</div>
                            <div class="breakdown-value" id="detailedTaxableIncome">₹8,25,000</div>
                        </div>

                        <div class="breakdown-section-divider"></div>

                        <div class="breakdown-item">
                            <div class="breakdown-label">Exemption and deduction</div>
                            <div class="breakdown-value" id="detailedTotalDeductions">₹75,000</div>
                        </div>

                        <div class="breakdown-sub-item">
                            <div class="sub-label">Exempt Allowances</div>
                            <div class="sub-value" id="detailedExemptAllowances">₹0</div>
                        </div>

                        <div class="breakdown-sub-item">
                            <div class="sub-label" id="deductionTypeLabel">Standard Deductions</div>
                            <div class="sub-value" id="detailedStandardDeductions">₹75,000</div>
                        </div>

                        <div class="breakdown-sub-item" id="chapterDeductionsRow" style="display: none;">
                            <div class="sub-label">Chapter VI A Deductions</div>
                            <div class="sub-value" id="detailedChapterDeductions">₹0</div>
                        </div>

                        <div class="breakdown-section-divider"></div>

                        <div class="breakdown-item">
                            <div class="breakdown-label">Tax payable</div>
                            <div class="breakdown-value" id="detailedTaxPayable">₹0</div>
                        </div>

                        <div class="breakdown-sub-item">
                            <div class="sub-label">Income tax</div>
                            <div class="sub-value" id="detailedIncomeTax">₹0</div>
                        </div>

                        <div class="breakdown-sub-item">
                            <div class="sub-label">Surcharge</div>
                            <div class="sub-value" id="detailedSurcharge">₹0</div>
                        </div>

                        <div class="breakdown-sub-item">
                            <div class="sub-label">Health and education cess</div>
                            <div class="sub-value" id="detailedCess">₹0</div>
                        </div>
                    </div>
                </div>

                <!-- Filing Information -->
                <div class="filing-info">
                    <div class="filing-item">
                        <span class="filing-label">ITR filing due date:</span>
                        <span class="filing-value" id="filingDueDate">July 31, 2025</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="detailed-action-buttons">
                    <button class="detailed-download-btn" onclick="downloadDetailedPDF()">
                        <span class="btn-icon">📄</span>
                        Download Detailed Report
                    </button>
                    <button class="detailed-file-btn">
                        <span class="btn-icon">📋</span>
                        File ITR Now
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/nav-component.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/income_tax_calculator_with_old_and_new_tax_regime_script.js') }}"></script>
</body>
</html>
