<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capital Gains Calculator (With & Without Tax Slabs) | Calculate STCG & LTCG Tax</title>
    <meta name="description" content="Calculate capital gains tax with and without tax slabs. Comprehensive calculator for STCG, LTCG with indexation, exemptions for equity, property, debt funds, gold and crypto.">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nav-component.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/capital_gains_calculator_with_and_without_tax_slabs_style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Capital Gains Calculator</h1>
            {% include 'navigation.html' %}
        </header>

        <div class="calculator-container">
            <div class="input-sections">
                <!-- Capital Gains Calculation Section -->
                <div class="section">
                    <h2>Calculate Capital Gains Tax</h2>
                    <div class="input-grid">
                        
                        <!-- Tax Mode Selection -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">
                                    Tax Calculation Mode
                                    <span class="tooltip" data-tooltip="Choose whether to calculate tax with or without considering income tax slabs">‚ÑπÔ∏è</span>
                                </label>
                            </div>
                            <div class="mode-container">
                                <select id="cgTaxMode" class="mode-select">
                                    <option value="without_slab">Without slab impact</option>
                                    <option value="with_slab">With slab impact</option>
                                </select>
                            </div>
                        </div>

                        <!-- Asset Type Selection -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">
                                    Asset Type
                                    <span class="tooltip" data-tooltip="Different assets have different tax rules for STCG/LTCG holding periods and rates">‚ÑπÔ∏è</span>
                                </label>
                            </div>
                            <div class="asset-container">
                                <select id="cgAssetType" class="asset-select">
                                    <option value="equity_share">Equity Share</option>
                                    <option value="equity_mf">Equity MF</option>
                                    <option value="debt_mf">Debt MF</option>
                                    <option value="gold">Gold</option>
                                    <option value="property">Property</option>
                                    <option value="unlisted_share">Unlisted Share</option>
                                    <option value="crypto">Crypto (VDA)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Purchase Date -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">Purchase Date</label>
                                <div class="input-field-container">
                                    <input type="date" id="cgPurchaseDate" value="2020-01-01">
                                </div>
                            </div>
                        </div>

                        <!-- Sale Date -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">Sale Date</label>
                                <div class="input-field-container">
                                    <input type="date" id="cgSaleDate" value="2024-01-01">
                                </div>
                            </div>
                        </div>

                        <!-- Purchase Value -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">Purchase Value</label>
                                <div class="input-field-container">
                                    <input type="number" id="cgPurchaseValue" value="100000" min="1" step="1000">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgPurchaseValueSlider" min="10000" max="5000000" value="100000" step="10000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ10K</span>
                                    <span>‚Çπ50L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Sale Value -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">Sale Value</label>
                                <div class="input-field-container">
                                    <input type="number" id="cgSaleValue" value="160000" min="1" step="1000">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgSaleValueSlider" min="10000" max="5000000" value="160000" step="10000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ10K</span>
                                    <span>‚Çπ50L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Transfer Costs -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">
                                    Transfer Costs / Brokerage
                                    <span class="tooltip" data-tooltip="Costs incurred during sale like brokerage, stamp duty, etc.">‚ÑπÔ∏è</span>
                                </label>
                                <div class="input-field-container">
                                    <input type="number" id="cgTransferCosts" value="0" min="0" step="100">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgTransferCostsSlider" min="0" max="100000" value="0" step="1000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ0</span>
                                    <span>‚Çπ1L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Improvement Cost (conditional) -->
                        <div class="input-group" id="cgImprovementCostGroup" style="display: none;">
                            <div class="input-row">
                                <label class="input-label">
                                    Improvement Cost
                                    <span class="tooltip" data-tooltip="Cost of improvements made to the property/asset">‚ÑπÔ∏è</span>
                                </label>
                                <div class="input-field-container">
                                    <input type="number" id="cgImprovementCost" value="0" min="0" step="1000">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgImprovementCostSlider" min="0" max="1000000" value="0" step="5000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ0</span>
                                    <span>‚Çπ10L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Exemptions Section -->
                        <div class="input-group" id="cgExemptionsGroup">
                            <div class="input-row">
                                <label class="input-label">
                                    Section 54/54F/54EC Exemption Amount
                                    <span class="tooltip" data-tooltip="Reinvestment exemptions under Section 54, 54F, or 54EC">‚ÑπÔ∏è</span>
                                </label>
                                <div class="input-field-container">
                                    <input type="number" id="cgExemptionAmount" value="0" min="0" step="1000">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgExemptionAmountSlider" min="0" max="1000000" value="0" step="5000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ0</span>
                                    <span>‚Çπ10L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Annual Taxable Income (conditional) -->
                        <div class="input-group" id="cgAnnualIncomeGroup" style="display: none;">
                            <div class="input-row">
                                <label class="input-label">
                                    Your Annual Taxable Income
                                    <span class="tooltip" data-tooltip="Your annual taxable income (excluding this capital gain) for slab calculation">‚ÑπÔ∏è</span>
                                </label>
                                <div class="input-field-container">
                                    <input type="number" id="cgAnnualIncome" value="0" min="0" step="50000">
                                    <span class="input-suffix">‚Çπ</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cgAnnualIncomeSlider" min="0" max="5000000" value="0" step="50000" class="custom-slider">
                                <div class="slider-track"></div>
                                <div class="slider-labels">
                                    <span>‚Çπ0</span>
                                    <span>‚Çπ50L</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cess Toggle -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">
                                    Apply Cess 4%?
                                    <span class="tooltip" data-tooltip="Health and Education Cess at 4% on tax amount">‚ÑπÔ∏è</span>
                                </label>
                                <div class="toggle-container">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="cgApplyCess">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Surcharge Toggle -->
                        <div class="input-group">
                            <div class="input-row">
                                <label class="input-label">
                                    Apply Surcharge?
                                    <span class="tooltip" data-tooltip="Surcharge applies on high income (>50L for individuals)">‚ÑπÔ∏è</span>
                                </label>
                                <div class="toggle-container">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="cgApplySurcharge">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section">
                <div class="results-card-grid">
                    <div class="result-card holding-period-card">
                        <div class="card-content">
                            <div class="card-label">Holding Period</div>
                            <div class="card-value" id="cgHoldingPeriodResult">1,461 days</div>
                            <div class="card-sub" id="cgHoldingTypeResult">LTCG</div>
                        </div>
                    </div>

                    <div class="result-card net-gain-card">
                        <div class="card-content">
                            <div class="card-label">Net Gain</div>
                            <div class="card-value" id="cgNetGainResult">‚Çπ60,000</div>
                        </div>
                    </div>

                    <div class="result-card taxable-gain-card">
                        <div class="card-content">
                            <div class="card-label">Taxable Gain</div>
                            <div class="card-value" id="cgTaxableGainResult">‚Çπ60,000</div>
                        </div>
                    </div>

                    <div class="result-card tax-rate-card">
                        <div class="card-content">
                            <div class="card-label">Applicable Rate</div>
                            <div class="card-value" id="cgTaxRateResult">12.5%</div>
                        </div>
                    </div>

                    <div class="result-card capital-gains-tax-card">
                        <div class="card-content">
                            <div class="card-label bold-title">Capital Gains Tax</div>
                            <div class="card-value" id="cgTaxResult">‚Çπ7,500</div>
                        </div>
                    </div>

                    <div class="result-card effective-rate-card">
                        <div class="card-content">
                            <div class="card-label">Effective Tax %</div>
                            <div class="card-value" id="cgEffectiveRateResult">12.5%</div>
                        </div>
                    </div>
                </div>

                <!-- Explanation Section -->
                <div class="explanation-section">
                    <div class="explanation-header">Tax Calculation Explanation</div>
                    <div class="explanation-content" id="cgExplanationContent">
                        Equity shares held for more than 1 year qualify as LTCG. After 23-Jul-2024, LTCG is taxed at 12.5% with ‚Çπ1.25L exemption.
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="chart-section">
                    <div class="chart-header">Capital Gains Breakdown</div>
                    <div class="pie-chart-container">
                        <canvas id="cgChart"></canvas>
                    </div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="color-indicator net-gain"></div>
                            <div class="summary-label">Net Gain</div>
                            <div class="summary-amount" id="cgNetGainDisplay">‚Çπ60,000</div>
                        </div>
                        <div class="summary-item">
                            <div class="color-indicator capital-gains-tax"></div>
                            <div class="summary-label">Capital Gains Tax</div>
                            <div class="summary-amount" id="cgTaxDisplay">‚Çπ7,500</div>
                        </div>
                        <div class="summary-item">
                            <div class="color-indicator after-tax-gain"></div>
                            <div class="summary-label">After-tax Gain</div>
                            <div class="summary-amount" id="cgAfterTaxGainDisplay">‚Çπ52,500</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-btn download-btn" onclick="downloadCapitalGainsPDF()">
                        <span class="btn-icon">üìÑ</span>
                        Download PDF
                    </button>
                    <button class="action-btn table-btn" onclick="toggleCapitalGainsTable()">
                        <span class="btn-icon">üìä</span>
                        View Details
                    </button>
                </div>
            </div>
        </div>

        <!-- Table Section -->
        <div class="table-section hidden" id="cgTableSection">
            <div class="table-header">
                <h2>Capital Gains Calculation Details</h2>
            </div>
            
            <div class="table-container" id="cgDetailsTable">
                <div class="table-wrapper">
                    <table class="calculation-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Value</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody id="cgDetailsTableBody">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/nav-component.js') }}"></script>
    <script src="{{ url_for('static', filename='js/capital_gains_calculator_with_and_without_tax_slabs_script.js') }}"></script>
</body>
</html>
